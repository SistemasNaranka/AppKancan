# SelectionModal Component - Documentaci√≥n Completa

## üìã Descripci√≥n General

`SelectionModal` es un componente React moderno y atractivo construido con **Material UI 7.3.4** que proporciona una interfaz elegante para seleccionar m√∫ltiples elementos. Incluye dos modos: **selecci√≥n** (interactivo) y **consulta** (solo lectura).

### Caracter√≠sticas Principales

‚ú® **Dise√±o Moderno**
- Gradientes de color atractivos (p√∫rpura/azul)
- Animaciones suaves y transiciones
- Interfaz responsiva y accesible

üîç **Autocomplete Inteligente**
- Men√∫ desplegable mientras escribes
- Filtrado en tiempo real
- B√∫squeda en label y descripci√≥n
- Selecci√≥n directa desde el dropdown

‚úÖ **Selecci√≥n M√∫ltiple**
- Seleccionar/deseleccionar elementos individuales
- Botones separados: "Seleccionar todo" y "Deseleccionar todo"
- Indicador visual de elementos seleccionados
- Contador de seleccionados

üì± **Grid Responsivo**
- M√°ximo 3 columnas en pantallas grandes
- 2 columnas en tablets
- 1 columna en m√≥viles
- Scroll interno sin afectar la estructura

üëÅÔ∏è **Modo Consulta**
- Visualizaci√≥n de solo lectura
- Perfecto para mostrar informaci√≥n
- Sin botones de confirmaci√≥n

---

## üöÄ Instalaci√≥n

### 1. Dependencias Requeridas

El componente requiere las siguientes librer√≠as:

```bash
pnpm add @mui/material@7.3.4 @mui/icons-material @emotion/react @emotion/styled
```

### 2. Importar el Componente

```typescript
import SelectionModal, { SelectionItem } from '@/components/SelectionModal';
import { useSelectionModal } from '@/hooks/useSelectionModal';
```

---

## üìñ Uso B√°sico

### Ejemplo Simple

```typescript
import React, { useState } from 'react';
import { Button } from '@mui/material';
import SelectionModal, { SelectionItem } from '@/components/SelectionModal';
import { useSelectionModal } from '@/hooks/useSelectionModal';

const items: SelectionItem[] = [
  { id: 1, label: 'Elemento A', description: 'Descripci√≥n A' },
  { id: 2, label: 'Elemento B', description: 'Descripci√≥n B' },
  { id: 3, label: 'Elemento C', description: 'Descripci√≥n C' },
];

export default function MyComponent() {
  const modal = useSelectionModal();
  const [selected, setSelected] = useState<(string | number)[]>([]);

  const handleConfirm = (selectedIds: (string | number)[]) => {
    setSelected(selectedIds);
    console.log('Seleccionados:', selectedIds);
  };

  return (
    <>
      <Button onClick={modal.openModal} variant="contained">
        Abrir Modal
      </Button>

      <SelectionModal
        open={modal.open}
        onClose={modal.closeModal}
        onConfirm={handleConfirm}
        items={items}
        mode="select"
        title="Selecciona elementos"
      />

      <p>Seleccionados: {selected.length}</p>
    </>
  );
}
```

---

## üéØ Props del Componente

### `SelectionModalProps`

| Prop | Tipo | Requerido | Descripci√≥n |
|------|------|-----------|-------------|
| `open` | `boolean` | ‚úÖ | Controla si el modal est√° abierto |
| `onClose` | `() => void` | ‚úÖ | Callback cuando se cierra el modal |
| `onConfirm` | `(selected: (string \| number)[]) => void` | ‚úÖ | Callback cuando se confirma la selecci√≥n |
| `items` | `SelectionItem[]` | ‚úÖ | Array de elementos a mostrar |
| `title` | `string` | ‚ùå | T√≠tulo del modal (default: "Selecciona elementos") |
| `mode` | `'select' \| 'view'` | ‚ùå | Modo del modal (default: "select") |
| `initialSelected` | `(string \| number)[]` | ‚ùå | IDs inicialmente seleccionados (default: []) |
| `modalHeight` | `number \| string` | ‚ùå | Altura fija del modal (default: 600) |
| `maxColumns` | `number` | ‚ùå | N√∫mero m√°ximo de columnas en el grid (default: 3) |

### `SelectionItem`

```typescript
interface SelectionItem {
  id: string | number;      // ID √∫nico del elemento
  label: string;            // Texto visible del elemento
  description?: string;     // Descripci√≥n opcional
}
```

---

## üé® Modos de Funcionamiento

### Modo Selecci√≥n (`mode="select"`)

- ‚úÖ Permite seleccionar/deseleccionar elementos
- ‚úÖ Muestra checkbox en cada elemento
- ‚úÖ Botones separados: "Seleccionar todo" y "Deseleccionar todo"
- ‚úÖ Bot√≥n de confirmaci√≥n
- ‚úÖ Contador de seleccionados
- ‚úÖ Autocomplete dropdown mientras escribes

```typescript
<SelectionModal
  open={modal.open}
  onClose={modal.closeModal}
  onConfirm={handleConfirm}
  items={items}
  mode="select"
  title="Selecciona elementos"
  modalHeight={600}
  maxColumns={3}
/>
```

### Modo Consulta (`mode="view"`)

- üëÅÔ∏è Solo lectura
- üëÅÔ∏è Sin checkboxes
- üëÅÔ∏è Sin bot√≥n de confirmaci√≥n
- üëÅÔ∏è Autocomplete disponible
- üëÅÔ∏è Muestra elementos seleccionados con chip

```typescript
<SelectionModal
  open={modal.open}
  onClose={modal.closeModal}
  onConfirm={() => {}}  // No se usa en modo view
  items={items}
  mode="view"
  title="Elementos disponibles"
  initialSelected={[1, 3, 5]}
  modalHeight={600}
/>
```

---

## ü™ù Hook `useSelectionModal`

El hook `useSelectionModal` simplifica el manejo del estado del modal:

```typescript
const modal = useSelectionModal();

// Propiedades disponibles:
modal.open      // boolean - Estado del modal
modal.openModal  // () => void - Abre el modal
modal.closeModal // () => void - Cierra el modal
```

### Ejemplo Completo

```typescript
import { useSelectionModal } from '@/hooks/useSelectionModal';

export default function Component() {
  const modal = useSelectionModal();

  return (
    <>
      <Button onClick={modal.openModal}>Abrir</Button>
      <SelectionModal
        open={modal.open}
        onClose={modal.closeModal}
        onConfirm={handleConfirm}
        items={items}
      />
    </>
  );
}
```

---

## üîç Autocomplete Dropdown

El componente incluye un autocomplete inteligente que muestra coincidencias mientras escribes:

```typescript
// El usuario escribe "Elemento A" en el campo de b√∫squeda
// El dropdown muestra autom√°ticamente las coincidencias
// Al hacer click en una opci√≥n, se selecciona/deselecciona
```

**Caracter√≠sticas:**
- B√∫squeda en tiempo real
- Men√∫ desplegable autom√°tico
- Selecci√≥n directa desde el dropdown
- B√∫squeda en label y descripci√≥n
- M√°ximo 200px de altura para el dropdown

---

## üì± Grid Responsivo

El componente utiliza un grid responsive que se adapta al tama√±o de la pantalla:

```typescript
// Pantallas peque√±as (m√≥viles): 1 columna
// Tablets: 2 columnas
// Pantallas grandes: 3 columnas (m√°ximo)

<SelectionModal
  maxColumns={3}  // Puedes cambiar el m√°ximo de columnas
  // ... otras props
/>
```

**Breakpoints:**
- `xs` (0px): 1 columna
- `sm` (600px): 2 columnas
- `md` (960px): 3 columnas (m√°ximo)

---

## üé® Personalizaci√≥n de Estilos

El componente usa Material UI y Emotion para estilos. Puedes personalizar los colores modificando el componente:

### Cambiar Colores Principales

En `SelectionModal.tsx`, busca las referencias a `#667eea` (azul) y `#764ba2` (p√∫rpura):

```typescript
// Cambiar el gradiente del header
background: 'linear-gradient(135deg, #TU_COLOR_1 0%, #TU_COLOR_2 100%)',

// Cambiar color del checkbox
color: '#TU_COLOR',

// Cambiar color del bot√≥n
background: 'linear-gradient(135deg, #TU_COLOR_1 0%, #TU_COLOR_2 100%)',
```

### Ejemplo: Tema Verde

```typescript
// Reemplaza los gradientes
background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
color: '#10b981',
```

### Cambiar Altura del Modal

```typescript
<SelectionModal
  modalHeight={700}  // Aumenta la altura fija
  // ... otras props
/>
```

---

## üìä Manejo de Datos Grandes

El componente est√° optimizado para manejar grandes vol√∫menes de datos:

```typescript
// Genera 1000 elementos de ejemplo
const largeDataset = Array.from({ length: 1000 }, (_, i) => ({
  id: i + 1,
  label: `Elemento ${i + 1}`,
  description: `Descripci√≥n del elemento ${i + 1}`,
}));

<SelectionModal
  items={largeDataset}
  modalHeight={600}  // Altura fija
  maxColumns={3}     // Grid responsivo
  // ... otras props
/>
```

---

## üîÑ Integraci√≥n con Formularios

### Ejemplo con React Hook Form

```typescript
import { useForm } from 'react-hook-form';
import SelectionModal from '@/components/SelectionModal';
import { useSelectionModal } from '@/hooks/useSelectionModal';

export default function FormComponent() {
  const { register, watch, setValue } = useForm({
    defaultValues: {
      selectedItems: [],
    },
  });

  const modal = useSelectionModal();
  const selectedItems = watch('selectedItems');

  const handleConfirm = (selected: (string | number)[]) => {
    setValue('selectedItems', selected);
  };

  return (
    <>
      <Button onClick={modal.openModal}>
        Seleccionar ({selectedItems.length})
      </Button>

      <SelectionModal
        open={modal.open}
        onClose={modal.closeModal}
        onConfirm={handleConfirm}
        items={items}
        initialSelected={selectedItems}
      />
    </>
  );
}
```

---

## ‚ôø Accesibilidad

El componente incluye caracter√≠sticas de accesibilidad:

- ‚úÖ Soporte para teclado (Tab, Enter, Escape)
- ‚úÖ Labels sem√°nticos
- ‚úÖ Contraste de colores WCAG AA
- ‚úÖ Aria labels en elementos interactivos
- ‚úÖ Cierre con tecla Escape
- ‚úÖ Navegaci√≥n con flechas en autocomplete

---

## üêõ Troubleshooting

### El modal no se abre

```typescript
// ‚ùå Incorrecto
const [open, setOpen] = useState(false);
<SelectionModal open={open} onClose={() => {}} ... />

// ‚úÖ Correcto - usa el hook
const modal = useSelectionModal();
<SelectionModal open={modal.open} onClose={modal.closeModal} ... />
```

### Los estilos no se aplican

Aseg√∫rate de que Material UI est√© correctamente instalado:

```bash
pnpm add @mui/material@7.3.4 @emotion/react @emotion/styled
```

### El autocomplete no funciona

Verifica que los items tengan propiedades `label` v√°lidas:

```typescript
// ‚ùå Incorrecto
const items = [{ id: 1 }];  // Falta label

// ‚úÖ Correcto
const items = [{ id: 1, label: 'Elemento 1' }];
```

### El grid no se adapta

Aseg√∫rate de que `maxColumns` sea un n√∫mero v√°lido:

```typescript
<SelectionModal
  maxColumns={3}  // Debe ser un n√∫mero entre 1 y 4
  // ... otras props
/>
```

---

## üìù Archivos del Componente

```
client/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ SelectionModal.tsx      # Componente principal
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useSelectionModal.ts    # Hook para manejo de estado
‚îî‚îÄ‚îÄ pages/
    ‚îî‚îÄ‚îÄ Home.tsx                # Ejemplo de uso
```

---

## üéØ Casos de Uso

### 1. Selector de Categor√≠as

```typescript
const categories = [
  { id: 'cat1', label: 'Electr√≥nica', description: 'Productos electr√≥nicos' },
  { id: 'cat2', label: 'Ropa', description: 'Prendas de vestir' },
  // ...
];

<SelectionModal
  items={categories}
  title="Selecciona categor√≠as"
  onConfirm={handleCategories}
  mode="select"
  // ...
/>
```

### 2. Asignaci√≥n de Permisos

```typescript
const permissions = [
  { id: 'read', label: 'Lectura', description: 'Permite leer contenido' },
  { id: 'write', label: 'Escritura', description: 'Permite crear/editar' },
  { id: 'delete', label: 'Eliminaci√≥n', description: 'Permite eliminar' },
  // ...
];

<SelectionModal
  items={permissions}
  title="Asigna permisos"
  mode="select"
  onConfirm={handlePermissions}
  maxColumns={2}
  // ...
/>
```

### 3. Visualizaci√≥n de Elementos Seleccionados

```typescript
<SelectionModal
  items={allItems}
  title="Elementos seleccionados"
  mode="view"
  initialSelected={selectedIds}
  // ...
/>
```

---

## üöÄ Mejoras Futuras

Posibles mejoras que podr√≠as implementar:

- [ ] Paginaci√≥n para datasets muy grandes
- [ ] B√∫squeda avanzada con filtros m√∫ltiples
- [ ] Ordenamiento de elementos
- [ ] Drag & drop para reordenar
- [ ] Exportar selecci√≥n a CSV
- [ ] Temas oscuro/claro
- [ ] Internacionalizaci√≥n (i18n)
- [ ] Validaci√≥n de selecciones m√≠nimas/m√°ximas

---

## üìÑ Licencia

Este componente es parte del proyecto `mui-selection-modal` y est√° disponible para uso libre.

---

## üí° Tips y Mejores Pr√°cticas

1. **Usa IDs √∫nicos**: Aseg√∫rate de que cada elemento tenga un ID √∫nico
2. **Descriptions opcionales**: Las descripciones hacen el componente m√°s informativo
3. **Manejo de estado**: Usa el hook `useSelectionModal` para simplificar
4. **Datos iniciales**: Siempre pasa `initialSelected` cuando reabre el modal
5. **Altura fija**: El modal mantiene una altura fija para mejor UX
6. **Grid responsivo**: El grid se adapta autom√°ticamente al tama√±o de pantalla
7. **Autocomplete**: Aprovecha el autocomplete para b√∫squedas r√°pidas

---

**Versi√≥n**: 2.0.0  
**√öltima actualizaci√≥n**: Octubre 2025

## Changelog

### v2.0.0
- ‚ú® Altura fija del modal (no cambia seg√∫n items)
- ‚ú® Botones separados para Seleccionar/Deseleccionar todo
- ‚ú® Grid responsivo (m√°ximo 3 columnas)
- ‚ú® Autocomplete dropdown mientras escribes
- üêõ Mejoras en la responsividad
- üé® Mejor visualizaci√≥n en dispositivos m√≥viles

### v1.0.0
- üéâ Versi√≥n inicial del componente

